<project name="pgr">
	<property name="src.dir" value="${basedir}/src"/>
	<property name="test.dir" value="${basedir}/junit"/>
	<property name="web.dir" value="${basedir}/WebContent"/>
	<property name="views.dir" value="${web.dir}/WEB-INF/jsp/lcms"/>
	<property name="classes.dir" value="${web.dir}/WEB-INF/classes"/>
	<property name="lib.dir" value="${web.dir}/WEB-INF/lib"/>
	<property name="appserver.lib.dir" value="D:/jboss-lcms-new/server/default/lib"/>
	<property name="deploy.dir" value="D:/jboss-lcms-new/server/default/deploy/infra.ear"/>
	<property name="model.base.pkg" value="org.egov.lcms.models"/>
	<property name="action.base.pkg" value="org.egov.web.actions.masters"/>
	<property name="appcontext.path" value="${basedir}/config/applicationContext.xml"/>
	<path id="class.path">
		<path location="${classes.dir}"></path>
		<fileset dir="${lib.dir}" includes="*.jar"/>
		<fileset dir="${appserver.lib.dir}" includes="*.jar"/>
	</path>
	<target name="clean">
		<delete dir="${classes.dir}" includeemptydirs="true"/>
		<mkdir dir="${classes.dir}"/>
	</target>
	<target name="compile">
		<javac srcdir="${src.dir}" destdir="${classes.dir}" classpathref="class.path" source="1.5"/>
			<copy todir="${classes.dir}" >
		    	<fileset dir="${src.dir}" includes="**/*.xml"/>
		    	<fileset dir="${basedir}/config/" includes="**/*.xml"/>
		    	<fileset dir="${src.dir}" includes="**/*.properties"/>
		    </copy>
	</target>
	
	<target name="scaffold">
		<java classname="com.bluerain.quickweb.Scaffolder" classpathref="class.path">
			<arg value="${model.base.pkg}.${model}"/>
			<arg value="${action.base.pkg}"/>
			<arg value="${src.dir}"/>
			<arg value="${views.dir}"/>
			<arg value="${appcontext.path}"/>
		</java>		
	</target>
	<target name="syncdb" depends="compile">
		<java classname="com.bluerain.quickweb.DDLGenerator" classpathref="class.path" outputproperty="db.scripts">
			<arg value="${src.dir}"/>
			<arg value="hibernate.properties"/>
				<arg value="true"/>
		</java>
		<echo>${db.scripts}</echo>
	</target>
	<target name="deploy" depends="compile">
		<delete dir="${deploy.dir}/${ant.project.name}.war" includeemptydirs="true"/>
		<mkdir dir="${deploy.dir}/${ant.project.name}.war"/>
		<copy todir="${deploy.dir}/${ant.project.name}.war">
			<fileset dir="${web.dir}" />
		</copy>
		<copy todir="${deploy.dir}/mappings.jar">
			<fileset dir="${src.dir}" includes="**/*.hbm.xml" />
		</copy>
	</target>
</project>
