<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<!-- Generated January 24, 2011 ,author:suhasini-->
<hibernate-mapping>

<sql-query comment="returns resluts for active,primary emps genderwise " name="GENDER_DEMOGRAPHIC">
 <![CDATA[ 
 select DECODE(gender,null,'NOT MENTIONED',gender) as gender, count(distinct emp.id) as total ,round((count(distinct emp.id)/(
select count(distinct emp.id) from EG_EMPLOYEE emp ,EG_EIS_EMPLOYEEINFO info where emp.id=info.id and 
:date between info.from_date and info.to_date or (from_date<=:date and to_date is null) and info.is_primary='Y'
) * 100),2) as percnt from EG_EMPLOYEE emp , EG_EIS_EMPLOYEEINFO info  where emp.id=info.id and 
:date between info.from_date and info.to_date or (from_date<=:date and to_date is null) and info.is_primary='Y'
group by gender  order by 2
		 ]]>
		 </sql-query>
<sql-query comment="returns resluts for active,primary emps religionwise " name="RELIGION_DEMOGRAPHIC">
 <![CDATA[ 
 select DECODE(religion.religion_value,null,'NOT MENTIONED',religion.religion_value) as religion, count(distinct emp.id) as tot ,
 ROUND(count(distinct emp.id)/(
select count(distinct emp.id) from EG_EMPLOYEE emp ,EG_EIS_EMPLOYEEINFO info  where emp.id=info.id and 
:date between info.from_date and info.to_date or (from_date<=:date and to_date is null) and info.is_primary='Y'
) * 100,2) as percnt from EG_EMPLOYEE emp ,EG_EIS_EMPLOYEEINFO info,EGEIS_RELIGION_MSTR religion where emp.id=info.id and 
emp.religion_id=religion.religion_id(+) and 
(:date between info.from_date and info.to_date or (from_date<=:date and to_date is null)) and info.is_primary='Y'
group by religion.religion_value   order by 2
		 ]]>
</sql-query>
<sql-query comment="returns resluts for active,primary emps community wise " name="COMMUNITY_DEMOGRAPHIC">
 <![CDATA[ 
 SELECT DECODE(community.COMMUNITY_NAME,NULL,'NOT MENTIONED',community.COMMUNITY_NAME) AS community, COUNT(DISTINCT emp.ID) AS tot ,
 ROUND(COUNT(DISTINCT emp.ID)/(
SELECT COUNT(DISTINCT emp.ID) FROM EG_EMPLOYEE emp ,EG_EIS_EMPLOYEEINFO info  WHERE emp.ID=info.ID AND 
:date BETWEEN info.from_date AND info.TO_DATE OR (from_date<=:date AND TO_DATE IS NULL) AND info.is_primary='Y'
) * 100,2) AS percnt FROM EG_EMPLOYEE emp ,EG_EIS_EMPLOYEEINFO info,EGEIS_COMMUNITY_MSTR community WHERE emp.ID=info.ID AND 
emp.COMMUNITY_ID=community.COMMUNITY_ID(+) AND 
(:date BETWEEN info.from_date AND info.TO_DATE OR (from_date<=:date AND TO_DATE IS NULL)) AND info.is_primary='Y'
GROUP BY community.COMMUNITY_NAME   ORDER BY 2
		 ]]>
</sql-query>
</hibernate-mapping>