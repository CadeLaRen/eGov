<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="MeasurementSheet" language="groovy" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" isSummaryNewPage="true">
	<import value="org.egov.infstr.reporting.util.*"/>
	<import value="org.egov.infstr.utils.*"/>
	<parameter name="workName" class="java.lang.String"/>
	<parameter name="RE_Estimates" class="java.util.List"/>
	<parameter name="estimateNo" class="java.lang.String"/>
	<parameter name="activitySize" class="java.lang.Integer"/>
	<field name="remarks" class="java.lang.String"/>
	<field name="quantityString" class="java.lang.String"/>
	<field name="depthOrHeightString" class="java.lang.String"/>
	<field name="uomLengthString" class="java.lang.String"/>
	<field name="uom" class="java.lang.String"/>
	<field name="widthString" class="java.lang.String"/>
	<field name="no" class="java.lang.Double"/>
	<field name="slNo" class="java.lang.Number"/>
	<field name="identifier" class="java.lang.String"/>
	<group name="msheetFooterWhenNoRE">
		<groupExpression><![CDATA[$F{slNo}]]></groupExpression>
		<groupFooter>
			<band height="85">
				<printWhenExpression><![CDATA[$V{REPORT_COUNT}==$P{activitySize} && $P{RE_Estimates}.size()==0]]></printWhenExpression>
				<staticText>
					<reportElement x="70" y="63" width="100" height="20">
						<printWhenExpression><![CDATA[$P{RE_Estimates}.size()==0]]></printWhenExpression>
					</reportElement>
					<textElement textAlignment="Center" verticalAlignment="Bottom">
						<font size="12" isBold="true"/>
					</textElement>
					<text><![CDATA[E.E.(Project)]]></text>
				</staticText>
				<staticText>
					<reportElement x="351" y="63" width="100" height="20">
						<printWhenExpression><![CDATA[$P{RE_Estimates}.size()==0]]></printWhenExpression>
					</reportElement>
					<textElement textAlignment="Center" verticalAlignment="Bottom">
						<font size="12" isBold="true"/>
					</textElement>
					<text><![CDATA[S.D.E.(H.Q.)]]></text>
				</staticText>
				<staticText>
					<reportElement x="631" y="63" width="100" height="20">
						<printWhenExpression><![CDATA[$P{RE_Estimates}.size()==0]]></printWhenExpression>
					</reportElement>
					<textElement textAlignment="Center" verticalAlignment="Bottom">
						<font size="12" isBold="true"/>
					</textElement>
					<text><![CDATA[Jr.Engineer]]></text>
				</staticText>
			</band>
		</groupFooter>
	</group>
	<group name="dummyWorkNameHeader">
		<groupHeader>
			<band height="25" splitType="Stretch">
				<printWhenExpression><![CDATA[$V{REPORT_COUNT}==0]]></printWhenExpression>
				<textField isStretchWithOverflow="true">
					<reportElement x="118" y="0" width="683" height="20"/>
					<textElement verticalAlignment="Middle">
						<font size="12" isBold="true"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$P{workName}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="0" y="0" width="118" height="20"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="12" isBold="true"/>
					</textElement>
					<text><![CDATA[Name Of Work :-]]></text>
				</staticText>
			</band>
		</groupHeader>
	</group>
	<group name="dummyEstimateNumberHeader">
		<groupHeader>
			<band height="25" splitType="Stretch">
				<printWhenExpression><![CDATA[$V{REPORT_COUNT}==0]]></printWhenExpression>
				<textField>
					<reportElement x="143" y="0" width="300" height="20"/>
					<textElement verticalAlignment="Middle">
						<font size="12" isBold="true"/>
					</textElement>
					<textFieldExpression class="java.lang.String"><![CDATA[$P{estimateNo}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="1" y="0" width="142" height="20"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="12" isBold="true"/>
					</textElement>
					<text><![CDATA[Estimate Number :-]]></text>
				</staticText>
			</band>
		</groupHeader>
	</group>
	<group name="dummyGroupMeasurementSheetHeader">
		<groupHeader>
			<band height="40">
				<printWhenExpression><![CDATA[$V{REPORT_COUNT}==0]]></printWhenExpression>
				<staticText>
					<reportElement x="0" y="0" width="802" height="40"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="12" isBold="true"/>
					</textElement>
					<text><![CDATA[MEASUREMENT SHEET]]></text>
				</staticText>
			</band>
		</groupHeader>
	</group>
	<group name="dummyColumnHeader">
		<groupHeader>
			<band height="23" splitType="Stretch">
				<printWhenExpression><![CDATA[$V{REPORT_COUNT}==0]]></printWhenExpression>
				<staticText>
					<reportElement x="0" y="0" width="54" height="23"/>
					<box>
						<pen lineWidth="1.0"/>
						<topPen lineWidth="1.0"/>
						<leftPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
						<rightPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Sl.No.]]></text>
				</staticText>
				<staticText>
					<reportElement x="516" y="0" width="73" height="23"/>
					<box>
						<pen lineWidth="1.0"/>
						<topPen lineWidth="1.0"/>
						<leftPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
						<rightPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[D/H]]></text>
				</staticText>
				<staticText>
					<reportElement x="701" y="0" width="100" height="23"/>
					<box>
						<pen lineWidth="1.0"/>
						<topPen lineWidth="1.0"/>
						<leftPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
						<rightPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Unit]]></text>
				</staticText>
				<staticText>
					<reportElement x="54" y="0" width="247" height="23"/>
					<box>
						<pen lineWidth="1.0"/>
						<topPen lineWidth="1.0"/>
						<leftPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
						<rightPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Particulars]]></text>
				</staticText>
				<staticText>
					<reportElement x="301" y="0" width="70" height="23"/>
					<box>
						<pen lineWidth="1.0"/>
						<topPen lineWidth="1.0"/>
						<leftPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
						<rightPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[No]]></text>
				</staticText>
				<staticText>
					<reportElement x="371" y="0" width="72" height="23"/>
					<box>
						<pen lineWidth="1.0"/>
						<topPen lineWidth="1.0"/>
						<leftPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
						<rightPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[L]]></text>
				</staticText>
				<staticText>
					<reportElement x="443" y="0" width="73" height="23"/>
					<box>
						<pen lineWidth="1.0"/>
						<topPen lineWidth="1.0"/>
						<leftPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
						<rightPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[B]]></text>
				</staticText>
				<staticText>
					<reportElement x="589" y="0" width="112" height="23"/>
					<box>
						<pen lineWidth="1.0"/>
						<topPen lineWidth="1.0"/>
						<leftPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
						<rightPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<text><![CDATA[Qty.]]></text>
				</staticText>
			</band>
		</groupHeader>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="5" splitType="Stretch"/>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="21" splitType="Prevent">
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToTallestObject" x="589" y="0" width="112" height="20"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{identifier}=="D"?
($F{quantityString}=="0"?null:"-".concat($F{quantityString})):
($F{quantityString}=="0"?null:$F{quantityString})]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToTallestObject" x="516" y="0" width="73" height="20"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{depthOrHeightString}=="0"?null:$F{depthOrHeightString}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToTallestObject" x="0" y="0" width="54" height="20"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{slNo}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToTallestObject" x="371" y="0" width="72" height="20"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{uomLengthString}=="0"?null:$F{uomLengthString}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToTallestObject" x="701" y="0" width="100" height="20"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{uom}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToTallestObject" x="443" y="0" width="73" height="20"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{widthString}=="0"?null:$F{widthString}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToTallestObject" x="301" y="0" width="70" height="20"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{no}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="###0.00" isBlankWhenNull="true">
				<reportElement stretchType="RelativeToTallestObject" x="54" y="0" width="247" height="20"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font isBold="false" isPdfEmbedded="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{remarks}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="39" splitType="Prevent">
			<printWhenExpression><![CDATA[$P{RE_Estimates}.size()!=0]]></printWhenExpression>
			<subreport>
				<reportElement x="0" y="0" width="800" height="39"/>
				<subreportParameter name="SUBREPORT_DIR"/>
				<dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{RE_Estimates}, false)]]></dataSourceExpression>
				<subreportExpression class="java.io.InputStream"><![CDATA[ReportUtil.getTemplateAsStream("MeasurementSheetForRE.jasper")]]></subreportExpression>
			</subreport>
		</band>
	</summary>
</jasperReport>
