<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
	<class name="org.egov.ptis.domain.entity.property.BasicPropertyImpl"
		table="EGPT_BASIC_PROPERTY" polymorphism="explicit">
		<id name="id" column="ID_BASIC_PROPERTY" type="java.lang.Long">
			<generator class="sequence">
				<param name="sequence">SEQ_BASIC_PROP</param>
			</generator>
		</id>
		<property name="createdDate" type="java.util.Date">
			<column name="CREATED_DATE" not-null="true" />
		</property>
		<property name="modifiedDate" type="java.util.Date">
			<column name="MODIFIED_DATE" not-null="true" />
		</property>
		<many-to-one name="createdBy" class="org.egov.lib.rjbac.user.UserImpl"
			>
			<column name="CREATED_BY" />
		</many-to-one>
		<many-to-one name="modifiedBy" class="org.egov.lib.rjbac.user.UserImpl"
			>
			<column name="MODIFIED_BY" />
		</many-to-one>

		<property name="upicNo" column="PROPERTYID" />
		<property name="active" column="IS_ACTIVE" type="yes_no" />

		<many-to-one name="address" column="ADDRESSID"
			class="org.egov.ptis.domain.entity.property.PropertyAddress" cascade="all"
			unique="true" />


		<many-to-one name="propertyID" column="ID_PROPERTYID"
			class="org.egov.ptis.domain.entity.property.PropertyID" cascade="all" unique="true" />

		<many-to-one name="boundary" class="org.egov.lib.admbndry.BoundaryImpl"
			column="ID_ADM_BNDRY" />
			
		<property name="oldMuncipalNum" column="MUNICIAPL_NO_OLD" />

		<!--
			<one-to-one name="property" lazy="proxy"
			class="org.egov.ptis.domain.entity.property.PropertyImpl"
			property-ref="defaultBasicProperty" cascade="all"
			constrained="false"> <formula>ID_BASIC_PROPERTY</formula>
			<formula>'Y'</formula> <formula>'N'</formula> to refer nonHistory
			property included by Suhasini </one-to-one>
		-->
		<!--
			above code commented because to get/set set of properties from
			basicproperty still if say basicProperty.getProperty() will returns
			default non-history property these changes done in pojo class
		-->
		<set name="propertySet" cascade="all-delete-orphan" table="EGPT_PROPERTY">
			<key column="ID_BASIC_PROPERTY" not-null="true" />
			<one-to-many class="org.egov.ptis.domain.entity.property.PropertyImpl" />
		</set>

		<set name="propertyStatusValuesSet" cascade="all"
			table="EGPT_PROPERTY_STATUS_VALUES" order-by="CREATED_DATE">
			<key column="ID_BASIC_PROPERTY" not-null="true" />
			<one-to-many class="org.egov.ptis.domain.entity.property.PropertyStatusValues" />
		</set>

		<many-to-one name="propertyMutationMaster" column="ID_PROP_CREATE_REASON"
			class="org.egov.ptis.domain.entity.property.PropertyMutationMaster" />

		<property name="propCreateDate" column="PROP_CREATE_DATE" />

		<one-to-one name="propertyReference" lazy="proxy"
			class="org.egov.ptis.domain.entity.property.PropertyReference" property-ref="defaultPropertyReference"
			cascade="all" constrained="false">
			<formula>ID_BASIC_PROPERTY</formula>
			<formula>'N'</formula>
		</one-to-one>

		<set name="propMutationSet" cascade="all" table="EGPT_PROPERTY_MUTATION"
			order-by="ID_PROP_MUTATION">
			<key column="ID_BASIC_PROPERTY" not-null="true" />
			<one-to-many class="org.egov.ptis.domain.entity.property.PropertyMutation" />
		</set>
		
		<many-to-one name="status" column="STATUS"
			class="org.egov.ptis.domain.entity.property.PropertyStatus" />
			
		<property name="extraField1" column="EXTRA_FIELD1" />
		<property name="extraField2" column="EXTRA_FIELD2" />
		<property name="extraField3" column="EXTRA_FIELD3" />
		<property name="gisReferenceNo" column="GIS_REF_NO" />
		
		<set name="notices" cascade="all-delete-orphan" table="EGPT_NOTICE">
			<key column="ID_BASICPROPERTY" not-null="true" />
			<one-to-many class="org.egov.ptis.notice.PtNotice" />
		</set>
		
		<set name="objections" cascade="all-delete-orphan" table="EGPT_OBJECTION">
			<key column="ID_BASICPROPERTY"  />
			<one-to-many class="org.egov.ptis.domain.entity.objection.Objection" />
		</set>
		
		<set name="recoveries" cascade="all-delete-orphan" table="EGPT_RECOVERY">
			<key column="id_basic_property"  />
			<one-to-many class="org.egov.ptis.domain.entity.recovery.Recovery" />
		</set>
		<property name="isMigrated" column="ISMIGRATED" />
		
		<set name="propertyDocsSet" cascade="all-delete-orphan"
			table="EGPT_PROPERTY_DOCS">
			<key column="id_basic_property" not-null="true" />
			<one-to-many class="org.egov.ptis.domain.entity.property.PropertyDocs"
				 />
		</set>
		
		<property name="partNo" column="PART_NO" />
		<property name="allChangesCompleted" column="ALL_CHANGES_COMPLETED"/>
		
	</class>

</hibernate-mapping>