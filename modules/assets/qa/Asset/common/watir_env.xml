<project name="CommonWatirEnvironment" default="usage" basedir=".">
  <property name="watir.common.url" value="http://192.168.1.3/egi/trunk/qa/common/" />
  <property name="watir.export.dir" value="${watir.export.dir}"/>
  <property name="svn.user" value="bhavna"/> 
  <property name="svn.pass" value="ENTER_SVN_PASSWORD_HERE"/>
  <property name="watir.common.version" value="HEAD"/> <!-- Latest version -->
  
  <!-- ### Kick off the export step ### -->
  <target name="svnexport" description="SVN Export step">
    <echo message="SVN Username : ${svn.user}" />
    <echo message="Common Watir URL : ${watir.common.url}" />
    <echo message="Local Watir Export Directory : ${watir.export.dir}" />
    <input message="Do you want to proceed with the export (y/n)?" validargs="y,n" addproperty="do.delete" />
    <condition property="do.abort">
      <equals arg1="n" arg2="${do.delete}"/>
    </condition>
    <fail if="do.abort">Aborted by user.</fail>
    
    <delete dir="${watir.export.dir}"/>
    
    <exec dir="." executable="svn" searchpath="true">
	   <arg line="export --username=${svn.user} --password=${svn.pass} --force -r ${watir.common.version} ${watir.common.url} ${watir.export.dir}"/>
    </exec>
    
    <copy todir=".">
        <fileset dir="${watir.export.dir}"/>
    </copy>
    
    <delete dir="${watir.export.dir}"/>
    
  </target>
  
  <target name="usage">
  <echo>
##### IGNORE [echo] markers in the following messages #####
ant -f watir_env.xml [-Dsvn.user=username] [-Dsvn.user=password] [-Dwatir.common.version=version] [-Dwatir.common.url=URL_from_where_to_download] [-Dwatir.export.dir=Local_folder_where_to_download] svnexport

Example usages:
# To see usage info
ant -f watir_env.xml usage
  
# To run the export step overriding the default SVN username/password as in the script. You can set svn password as an environment variable and refer to it on the command line as shown below. 
ant -f watir_env.xml -Dsvn.user=username -Dsvn.pass=%SVNPASSWORD% svnexport
In the above command, your svn password has been set as SVNPASSWORD in the Environment settings (Computer -> Properties -> Advanced System Settings -> Advanced Tab -> Environment Variables -> User variables.

# To run the export step overriding the default SVN username/password and local directory as in the script,
ant -f watir_env.xml -Dsvn.user=username -Dsvn.pass=password [-Dwatir.export.dir=mydirectory svnexport

Each target is explained below:
---------------------------------------------------------------
svnexport:
Export happens in this target. The defaults are set in the file near the top. You may over-ride these values by using -Dvariable.name=variable.value construct in the commandline.
---------------------------------------------------------------
usage:
What you are seeing now.
---------------------------------------------------------------   
    </echo>
  </target>

    
</project>
