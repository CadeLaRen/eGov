var boundaries=[{code: 29120002, name: 'Hagaribommanahalli', parent: 2912, lat: 15.06, lng: 76.200000000000003, type: 'block'},
 {code: 29120003, name: 'Hospet', parent: 2912, lat: 15.25, lng: 76.5, type: 'block'},
 {code: 29120004, name: 'Siruguppa', parent: 2912, lat: 15.57, lng: 76.939999999999998, type: 'block'},
 {code: 29120005, name: 'Bellary', parent: 2912, lat: 15.220000000000001, lng: 76.920000000000002, type: 'block'},
 {code: 29120006, name: 'Sandur', parent: 2912, lat: 15.06, lng: 76.579999999999998, type: 'block'},
 {code: 29120007, name: 'Kudligi', parent: 2912, lat: 14.779999999999999, lng: 76.430000000000007, type: 'block'},
 {code: 29170007, name: 'Mudigere', parent: 2917, lat: 13.15, lng: 75.480000000000004, type: 'block'},
 {code: 2916, name: 'Udupi', parent: 29, lat: 13.470000000000001, lng: 74.879999999999995, type: 'district'},
 {code: 29140001, name: 'Harihar', parent: 2914, lat: 14.44, lng: 75.760000000000005, type: 'block'},
 {code: 29140002, name: 'Harapanahalli', parent: 2914, lat: 14.720000000000001, lng: 75.980000000000004, type: 'block'},
 {code: 29140003, name: 'Jagalur', parent: 2914, lat: 14.550000000000001, lng: 76.290000000000006, type: 'block'},
 {code: 29140005, name: 'Honnali', parent: 2914, lat: 14.19, lng: 75.640000000000001, type: 'block'},
 {code: 29140006, name: 'Channagiri', parent: 2914, lat: 14.07, lng: 75.920000000000002, type: 'block'},
 {code: 29160001, name: 'Kundapura', parent: 2916, lat: 13.720000000000001, lng: 74.810000000000002, type: 'block'},
 {code: 29160002, name: 'Udupi', parent: 2916, lat: 13.369999999999999, lng: 74.810000000000002, type: 'block'},
 {code: 29160003, name: 'Karkal', parent: 2916, lat: 13.25, lng: 75.010000000000005, type: 'block'},
 {code: 2913, name: 'Chitradurga', parent: 29, lat: 14.17, lng: 76.519999999999996, type: 'district'},
 {code: 2914, name: 'Davanagere', parent: 29, lat: 14.41, lng: 75.950000000000003, type: 'district'},
 {code: 29010001, name: 'Chikodi', parent: 2901, lat: 16.460000000000001, lng: 74.530000000000001, type: 'block'},
 {code: 29010002, name: 'Athni', parent: 2901, lat: 16.739999999999998, lng: 75.060000000000002, type: 'block'},
 {code: 29010003, name: 'Raybag', parent: 2901, lat: 16.48, lng: 74.859999999999999, type: 'block'},
 {code: 29010004, name: 'Gokak', parent: 2901, lat: 16.18, lng: 74.909999999999997, type: 'block'},
 {code: 29010005, name: 'Hukeri', parent: 2901, lat: 16.190000000000001, lng: 74.569999999999993, type: 'block'},
 {code: 29010006, name: 'Belgaum', parent: 2901, lat: 15.869999999999999, lng: 74.540000000000006, type: 'block'},
 {code: 29010007, name: 'Khanapur', parent: 2901, lat: 15.59, lng: 74.469999999999999, type: 'block'},
 {code: 29010008, name: 'Sampgaon', parent: 2901, lat: 15.74, lng: 74.799999999999997, type: 'block'},
 {code: 29010009, name: 'Parasgad', parent: 2901, lat: 15.859999999999999, lng: 75.060000000000002, type: 'block'},
 {code: 29010010, name: 'Ramdurg', parent: 2901, lat: 16.010000000000002, lng: 75.269999999999996, type: 'block'},
 {code: 2917, name: 'Chikmagalur', parent: 29, lat: 13.449999999999999, lng: 75.689999999999998, type: 'district'},
 {code: 29180001, name: 'Chiknayakanhalli', parent: 2918, lat: 13.51, lng: 76.579999999999998, type: 'block'},
 {code: 29180002, name: 'Sira', parent: 2918, lat: 13.77, lng: 76.879999999999995, type: 'block'},
 {code: 29180003, name: 'Pavagada', parent: 2918, lat: 14.16, lng: 77.25, type: 'block'},
 {code: 29180004, name: 'Madhugiri', parent: 2918, lat: 13.720000000000001, lng: 77.239999999999995, type: 'block'},
 {code: 29020006, name: 'Hungund', parent: 2902, lat: 16.059999999999999, lng: 76.069999999999993, type: 'block'},
 {code: 29180006, name: 'Tumkur', parent: 2918, lat: 13.33, lng: 77.099999999999994, type: 'block'},
 {code: 29180007, name: 'Gubbi', parent: 2918, lat: 13.359999999999999, lng: 76.859999999999999, type: 'block'},
 {code: 29180008, name: 'Tiptur', parent: 2918, lat: 13.27, lng: 76.5, type: 'block'},
 {code: 29180009, name: 'Turuvekere', parent: 2918, lat: 13.140000000000001, lng: 76.719999999999999, type: 'block'},
 {code: 29180010, name: 'Kunigal', parent: 2918, lat: 12.94, lng: 77, type: 'block'},
 {code: 29030001, name: 'Bijapur', parent: 2903, lat: 16.789999999999999, lng: 75.650000000000006, type: 'block'},
 {code: 29030002, name: 'Indi', parent: 2903, lat: 17.190000000000001, lng: 75.879999999999995, type: 'block'},
 {code: 29030003, name: 'Sindgi', parent: 2903, lat: 16.879999999999999, lng: 76.239999999999995, type: 'block'},
 {code: 29030004, name: 'Basavana bagevadi', parent: 2903, lat: 16.559999999999999, lng: 75.930000000000007, type: 'block'},
 {code: 29030005, name: 'Muddebihal', parent: 2903, lat: 16.379999999999999, lng: 76.209999999999994, type: 'block'},
 {code: 29200001, name: 'Bangalore north', parent: 2920, lat: 13.08, lng: 77.549999999999997, type: 'block'},
 {code: 29200002, name: 'Bangalore south', parent: 2920, lat: 12.93, lng: 77.579999999999998, type: 'block'},
 {code: 29200003, name: 'Anekal', parent: 2920, lat: 12.789999999999999, lng: 77.700000000000003, type: 'block'},
 {code: 29260004, name: 'Mysore', parent: 2926, lat: 12.279999999999999, lng: 76.620000000000005, type: 'block'},
 {code: 29050001, name: 'Basavakalyan', parent: 2905, lat: 17.809999999999999, lng: 76.920000000000002, type: 'block'},
 {code: 29050002, name: 'Bhalki', parent: 2905, lat: 18.039999999999999, lng: 77.189999999999998, type: 'block'},
 {code: 29050003, name: 'Aurad', parent: 2905, lat: 18.219999999999999, lng: 77.379999999999995, type: 'block'},
 {code: 29050004, name: 'Bidar', parent: 2905, lat: 17.879999999999999, lng: 77.469999999999999, type: 'block'},
 {code: 29050005, name: 'Homnabad', parent: 2905, lat: 17.75, lng: 77.230000000000004, type: 'block'},
 {code: 29220001, name: 'Krishnarajpet', parent: 2922, lat: 12.68, lng: 76.480000000000004, type: 'block'},
 {code: 29220002, name: 'Nagamangala', parent: 2922, lat: 12.859999999999999, lng: 76.739999999999995, type: 'block'},
 {code: 29220003, name: 'Pandavapura', parent: 2922, lat: 12.550000000000001, lng: 76.650000000000006, type: 'block'},
 {code: 29220004, name: 'Shrirangapattana', parent: 2922, lat: 12.41, lng: 76.739999999999995, type: 'block'},
 {code: 29220005, name: 'Mandya', parent: 2922, lat: 12.6, lng: 76.859999999999999, type: 'block'},
 {code: 29220006, name: 'Maddur', parent: 2922, lat: 12.609999999999999, lng: 77.030000000000001, type: 'block'},
 {code: 29220007, name: 'Malavalli', parent: 2922, lat: 12.359999999999999, lng: 77.120000000000005, type: 'block'},
 {code: 29070001, name: 'Yelbarga', parent: 2907, lat: 15.550000000000001, lng: 76.049999999999997, type: 'block'},
 {code: 29070002, name: 'Kushtagi', parent: 2907, lat: 15.82, lng: 76.170000000000002, type: 'block'},
 {code: 29070003, name: 'Gangawati', parent: 2907, lat: 15.539999999999999, lng: 76.519999999999996, type: 'block'},
 {code: 29070004, name: 'Koppal', parent: 2907, lat: 15.33, lng: 76.159999999999997, type: 'block'},
 {code: 29240001, name: 'Mangalore', parent: 2924, lat: 12.98, lng: 74.879999999999995, type: 'block'},
 {code: 29240002, name: 'Bantval', parent: 2924, lat: 12.84, lng: 75.069999999999993, type: 'block'},
 {code: 29240003, name: 'Beltangadi', parent: 2924, lat: 13, lng: 75.319999999999993, type: 'block'},
 {code: 29240004, name: 'Puttur', parent: 2924, lat: 12.75, lng: 75.379999999999995, type: 'block'},
 {code: 29240005, name: 'Sulya', parent: 2924, lat: 12.6, lng: 75.480000000000004, type: 'block'},
 {code: 29090001, name: 'Dharwad', parent: 2909, lat: 15.49, lng: 74.959999999999994, type: 'block'},
 {code: 29090002, name: 'Navalgund', parent: 2909, lat: 15.550000000000001, lng: 75.349999999999994, type: 'block'},
 {code: 29090003, name: 'Hubli', parent: 2909, lat: 15.35, lng: 75.170000000000002, type: 'block'},
 {code: 29090004, name: 'Kalghatgi', parent: 2909, lat: 15.19, lng: 74.980000000000004, type: 'block'},
 {code: 29090005, name: 'Kundgol', parent: 2909, lat: 15.199999999999999, lng: 75.299999999999997, type: 'block'},
 {code: 29260001, name: 'Piriyapatna', parent: 2926, lat: 12.4, lng: 76.079999999999998, type: 'block'},
 {code: 29260002, name: 'Hunsur', parent: 2926, lat: 12.289999999999999, lng: 76.310000000000002, type: 'block'},
 {code: 29260003, name: 'Krishnarajanagara', parent: 2926, lat: 12.52, lng: 76.319999999999993, type: 'block'},
 {code: 29170006, name: 'Chikmagalur', parent: 2917, lat: 13.359999999999999, lng: 75.719999999999999, type: 'block'},
 {code: 29260005, name: 'Heggadadevankote', parent: 2926, lat: 11.99, lng: 76.329999999999998, type: 'block'},
 {code: 29260006, name: 'Nanjangud', parent: 2926, lat: 12.07, lng: 76.670000000000002, type: 'block'},
 {code: 29260007, name: 'Tirumakudal narsipur', parent: 2926, lat: 12.25, lng: 76.930000000000007, type: 'block'},
 {code: 29110001, name: 'Shiggaon', parent: 2911, lat: 15.01, lng: 75.189999999999998, type: 'block'},
 {code: 29110002, name: 'Savanur', parent: 2911, lat: 14.970000000000001, lng: 75.400000000000006, type: 'block'},
 {code: 29110003, name: 'Hangal', parent: 2911, lat: 14.75, lng: 75.180000000000007, type: 'block'},
 {code: 29110004, name: 'Haveri', parent: 2911, lat: 14.84, lng: 75.510000000000005, type: 'block'},
 {code: 29110005, name: 'Byadgi', parent: 2911, lat: 14.67, lng: 75.439999999999998, type: 'block'},
 {code: 29110006, name: 'Hirekerur', parent: 2911, lat: 14.449999999999999, lng: 75.459999999999994, type: 'block'},
 {code: 29110007, name: 'Ranibennur', parent: 2911, lat: 14.609999999999999, lng: 75.659999999999997, type: 'block'},
 {code: 29130001, name: 'Molakalmuru', parent: 2913, lat: 14.789999999999999, lng: 76.739999999999995, type: 'block'},
 {code: 29130002, name: 'Challakere', parent: 2913, lat: 14.359999999999999, lng: 76.719999999999999, type: 'block'},
 {code: 29130003, name: 'Chitradurga', parent: 2913, lat: 14.27, lng: 76.349999999999994, type: 'block'},
 {code: 29130004, name: 'Davanagere', parent: 2913, lat: 14.050000000000001, lng: 76.200000000000003, type: 'block'},
 {code: 29130005, name: 'Hosdurga', parent: 2913, lat: 13.789999999999999, lng: 76.349999999999994, type: 'block'},
 {code: 29130006, name: 'Hiriyur', parent: 2913, lat: 13.970000000000001, lng: 76.650000000000006, type: 'block'},
 {code: 29150001, name: 'Sagar', parent: 2915, lat: 14.119999999999999, lng: 74.939999999999998, type: 'block'},
 {code: 29150002, name: 'Sorab', parent: 2915, lat: 14.44, lng: 75.099999999999994, type: 'block'},
 {code: 29150003, name: 'Shikarpur', parent: 2915, lat: 14.300000000000001, lng: 75.340000000000003, type: 'block'},
 {code: 29150004, name: 'Hosanagara', parent: 2915, lat: 13.890000000000001, lng: 75.109999999999999, type: 'block'},
 {code: 29150005, name: 'Tirthahalli', parent: 2915, lat: 13.710000000000001, lng: 75.260000000000005, type: 'block'},
 {code: 29150006, name: 'Shimoga', parent: 2915, lat: 13.960000000000001, lng: 75.510000000000005, type: 'block'},
 {code: 29150007, name: 'Bhadravati', parent: 2915, lat: 13.9, lng: 75.739999999999995, type: 'block'},
 {code: 29170001, name: 'Sringeri', parent: 2917, lat: 13.380000000000001, lng: 75.209999999999994, type: 'block'},
 {code: 29170002, name: 'Koppa', parent: 2917, lat: 13.460000000000001, lng: 75.340000000000003, type: 'block'},
 {code: 29170003, name: 'Narasimharajapura', parent: 2917, lat: 13.57, lng: 75.510000000000005, type: 'block'},
 {code: 29170004, name: 'Tarikere', parent: 2917, lat: 13.699999999999999, lng: 75.859999999999999, type: 'block'},
 {code: 2901, name: 'Belgaum', parent: 29, lat: 16.120000000000001, lng: 74.819999999999993, type: 'district'},
 {code: 2902, name: 'Bagalkot', parent: 29, lat: 16.219999999999999, lng: 75.629999999999995, type: 'district'},
 {code: 2903, name: 'Bijapur', parent: 29, lat: 16.789999999999999, lng: 75.950000000000003, type: 'district'},
 {code: 2904, name: 'Gulbarga', parent: 29, lat: 17.050000000000001, lng: 76.879999999999995, type: 'district'},
 {code: 2905, name: 'Bidar', parent: 29, lat: 17.949999999999999, lng: 77.230000000000004, type: 'district'},
 {code: 2906, name: 'Raichur', parent: 29, lat: 16.09, lng: 76.890000000000001, type: 'district'},
 {code: 2907, name: 'Koppal', parent: 29, lat: 15.56, lng: 76.219999999999999, type: 'district'},
 {code: 2908, name: 'Gadag', parent: 29, lat: 15.449999999999999, lng: 75.609999999999999, type: 'district'},
 {code: 2909, name: 'Dharwad', parent: 29, lat: 15.279999999999999, lng: 75.099999999999994, type: 'district'},
 {code: 2910, name: 'Uttara Kannada', parent: 29, lat: 14.789999999999999, lng: 74.620000000000005, type: 'district'},
 {code: 2911, name: 'Haveri', parent: 29, lat: 14.699999999999999, lng: 75.450000000000003, type: 'district'},
 {code: 2912, name: 'Bellary', parent: 29, lat: 15.109999999999999, lng: 76.530000000000001, type: 'district'},
 {code: 29020001, name: 'Jamkhandi', parent: 2902, lat: 16.550000000000001, lng: 75.290000000000006, type: 'block'},
 {code: 29020002, name: 'Bilgi', parent: 2902, lat: 16.34, lng: 75.590000000000003, type: 'block'},
 {code: 29020003, name: 'Mudhol', parent: 2902, lat: 16.300000000000001, lng: 75.290000000000006, type: 'block'},
 {code: 29020004, name: 'Badami', parent: 2902, lat: 15.99, lng: 75.629999999999995, type: 'block'},
 {code: 29020005, name: 'Bagalkot', parent: 2902, lat: 16.210000000000001, lng: 75.760000000000005, type: 'block'},
 {code: 2918, name: 'Tumkur', parent: 29, lat: 13.43, lng: 76.900000000000006, type: 'district'},
 {code: 2919, name: 'Kolar', parent: 29, lat: 13.369999999999999, lng: 78.019999999999996, type: 'district'},
 {code: 2920, name: 'Bangalore Urban', parent: 29, lat: 12.76, lng: 77.540000000000006, type: 'district'},
 {code: 2921, name: 'Bangalore Rural', parent: 29, lat: 13.039999999999999, lng: 77.420000000000002, type: 'district'},
 {code: 2922, name: 'Mandya', parent: 29, lat: 12.609999999999999, lng: 76.799999999999997, type: 'district'},
 {code: 2923, name: 'Hassan', parent: 29, lat: 13, lng: 76.109999999999999, type: 'district'},
 {code: 2924, name: 'Dakshina Kannada', parent: 29, lat: 12.84, lng: 75.269999999999996, type: 'district'},
 {code: 2925, name: 'Kodagu', parent: 29, lat: 12.32, lng: 75.799999999999997, type: 'district'},
 {code: 2926, name: 'Mysore', parent: 29, lat: 12.210000000000001, lng: 76.439999999999998, type: 'district'},
 {code: 2927, name: 'Chamarajanagar', parent: 29, lat: 11.960000000000001, lng: 77.099999999999994, type: 'district'},
 {code: 29190001, name: 'Gauribidanur', parent: 2919, lat: 13.59, lng: 77.540000000000006, type: 'block'},
 {code: 29190002, name: 'Chik ballapur', parent: 2919, lat: 13.49, lng: 77.739999999999995, type: 'block'},
 {code: 29190003, name: 'Gudibanda', parent: 2919, lat: 13.68, lng: 77.75, type: 'block'},
 {code: 29190004, name: 'Bagepalli', parent: 2919, lat: 13.779999999999999, lng: 77.939999999999998, type: 'block'},
 {code: 29190005, name: 'Sidlaghatta', parent: 2919, lat: 13.449999999999999, lng: 77.900000000000006, type: 'block'},
 {code: 29190006, name: 'Chintamani', parent: 2919, lat: 13.48, lng: 78.069999999999993, type: 'block'},
 {code: 29190008, name: 'Kolar', parent: 2919, lat: 13.17, lng: 78.109999999999999, type: 'block'},
 {code: 29190009, name: 'Malur', parent: 2919, lat: 12.960000000000001, lng: 77.989999999999995, type: 'block'},
 {code: 29190010, name: 'Bangarapet', parent: 2919, lat: 12.94, lng: 78.25, type: 'block'},
 {code: 29190011, name: 'Mulbagal', parent: 2919, lat: 13.18, lng: 78.420000000000002, type: 'block'},
 {code: 29040001, name: 'Aland', parent: 2904, lat: 17.539999999999999, lng: 76.599999999999994, type: 'block'},
 {code: 29040002, name: 'Afzalpur', parent: 2904, lat: 17.25, lng: 76.400000000000006, type: 'block'},
 {code: 29040003, name: 'Gulbarga', parent: 2904, lat: 17.370000000000001, lng: 76.870000000000005, type: 'block'},
 {code: 29040004, name: 'Chincholi', parent: 2904, lat: 17.460000000000001, lng: 77.349999999999994, type: 'block'},
 {code: 29040005, name: 'Sedam', parent: 2904, lat: 17.079999999999998, lng: 77.319999999999993, type: 'block'},
 {code: 29040006, name: 'Chitapur', parent: 2904, lat: 17.149999999999999, lng: 77.049999999999997, type: 'block'},
 {code: 29040007, name: 'Jevargi', parent: 2904, lat: 16.940000000000001, lng: 76.629999999999995, type: 'block'},
 {code: 29040008, name: 'Shorapur', parent: 2904, lat: 16.489999999999998, lng: 76.569999999999993, type: 'block'},
 {code: 29040009, name: 'Shahpur', parent: 2904, lat: 16.66, lng: 76.930000000000007, type: 'block'},
 {code: 29040010, name: 'Yadgir', parent: 2904, lat: 16.739999999999998, lng: 77.260000000000005, type: 'block'},
 {code: 29210001, name: 'Nelamangala', parent: 2921, lat: 13.17, lng: 77.310000000000002, type: 'block'},
 {code: 29210002, name: 'Dod ballapur', parent: 2921, lat: 13.33, lng: 77.469999999999999, type: 'block'},
 {code: 29210003, name: 'Devanhalli', parent: 2921, lat: 13.26, lng: 77.709999999999994, type: 'block'},
 {code: 29210004, name: 'Hoskote', parent: 2921, lat: 13.09, lng: 77.849999999999994, type: 'block'},
 {code: 29210005, name: 'Magadi', parent: 2921, lat: 13.01, lng: 77.209999999999994, type: 'block'},
 {code: 29210006, name: 'Ramanagaram', parent: 2921, lat: 12.75, lng: 77.329999999999998, type: 'block'},
 {code: 29210007, name: 'Channapatna', parent: 2921, lat: 12.630000000000001, lng: 77.180000000000007, type: 'block'},
 {code: 29210008, name: 'Kanakapura', parent: 2921, lat: 12.5, lng: 77.459999999999994, type: 'block'},
 {code: 29060001, name: 'Lingsugur', parent: 2906, lat: 16.100000000000001, lng: 76.519999999999996, type: 'block'},
 {code: 29060002, name: 'Devadurga', parent: 2906, lat: 16.34, lng: 76.969999999999999, type: 'block'},
 {code: 29060003, name: 'Raichur', parent: 2906, lat: 16.190000000000001, lng: 77.370000000000005, type: 'block'},
 {code: 29060004, name: 'Manvi', parent: 2906, lat: 16.050000000000001, lng: 76.969999999999999, type: 'block'},
 {code: 29060005, name: 'Sindhnur', parent: 2906, lat: 15.779999999999999, lng: 76.730000000000004, type: 'block'},
 {code: 29230002, name: 'Belur', parent: 2923, lat: 13.15, lng: 75.900000000000006, type: 'block'},
 {code: 29230003, name: 'Arsikere', parent: 2923, lat: 13.31, lng: 76.25, type: 'block'},
 {code: 29230004, name: 'Hassan', parent: 2923, lat: 13.01, lng: 76.140000000000001, type: 'block'},
 {code: 29230005, name: 'Alur', parent: 2923, lat: 12.92, lng: 75.950000000000003, type: 'block'},
 {code: 29230006, name: 'Arkalgud', parent: 2923, lat: 12.68, lng: 76.069999999999993, type: 'block'},
 {code: 29230007, name: 'Hole narsipur', parent: 2923, lat: 12.76, lng: 76.260000000000005, type: 'block'},
 {code: 29230008, name: 'Channarayapatna', parent: 2923, lat: 12.970000000000001, lng: 76.450000000000003, type: 'block'},
 {code: 29080001, name: 'Nargund', parent: 2908, lat: 15.76, lng: 75.420000000000002, type: 'block'},
 {code: 29080002, name: 'Ron', parent: 2908, lat: 15.699999999999999, lng: 75.75, type: 'block'},
 {code: 29080003, name: 'Gadag', parent: 2908, lat: 15.42, lng: 75.620000000000005, type: 'block'},
 {code: 29080004, name: 'Shirhatti', parent: 2908, lat: 15.119999999999999, lng: 75.590000000000003, type: 'block'},
 {code: 29080005, name: 'Mundargi', parent: 2908, lat: 15.220000000000001, lng: 75.810000000000002, type: 'block'},
 {code: 29250001, name: 'Madikeri', parent: 2925, lat: 12.369999999999999, lng: 75.620000000000005, type: 'block'},
 {code: 29250002, name: 'Somvarpet', parent: 2925, lat: 12.57, lng: 75.849999999999994, type: 'block'},
 {code: 29250003, name: 'Virajpet', parent: 2925, lat: 12.130000000000001, lng: 75.939999999999998, type: 'block'},
 {code: 29180005, name: 'Koratagere', parent: 2918, lat: 13.5, lng: 77.25, type: 'block'},
 {code: 29100001, name: 'Karwar', parent: 2910, lat: 14.869999999999999, lng: 74.290000000000006, type: 'block'},
 {code: 29100002, name: 'Supa', parent: 2910, lat: 15.199999999999999, lng: 74.439999999999998, type: 'block'},
 {code: 29100003, name: 'Haliyal', parent: 2910, lat: 15.25, lng: 74.739999999999995, type: 'block'},
 {code: 29100004, name: 'Yellapur', parent: 2910, lat: 14.93, lng: 74.739999999999995, type: 'block'},
 {code: 29100005, name: 'Mundgod', parent: 2910, lat: 14.91, lng: 74.989999999999995, type: 'block'},
 {code: 29100006, name: 'Sirsi', parent: 2910, lat: 14.640000000000001, lng: 74.790000000000006, type: 'block'},
 {code: 29100007, name: 'Ankola', parent: 2910, lat: 14.699999999999999, lng: 74.450000000000003, type: 'block'},
 {code: 29100008, name: 'Kumta', parent: 2910, lat: 14.48, lng: 74.5, type: 'block'},
 {code: 29100009, name: 'Siddapur', parent: 2910, lat: 14.380000000000001, lng: 74.799999999999997, type: 'block'},
 {code: 29100010, name: 'Honavar', parent: 2910, lat: 14.27, lng: 74.569999999999993, type: 'block'},
 {code: 29100011, name: 'Bhatkal', parent: 2910, lat: 14.050000000000001, lng: 74.579999999999998, type: 'block'},
 {code: 29270001, name: 'Gundlupet', parent: 2927, lat: 11.779999999999999, lng: 76.650000000000006, type: 'block'},
 {code: 29270002, name: 'Chamarajanagar', parent: 2927, lat: 11.91, lng: 76.959999999999994, type: 'block'},
 {code: 29270003, name: 'Yelandur', parent: 2927, lat: 12.02, lng: 77.099999999999994, type: 'block'},
 {code: 29270004, name: 'Kollegal', parent: 2927, lat: 12.06, lng: 77.379999999999995, type: 'block'},
 {code: 2915, name: 'Shimoga', parent: 29, lat: 14.039999999999999, lng: 75.219999999999999, type: 'district'},
 {code: 29170005, name: 'Kadur', parent: 2917, lat: 13.539999999999999, lng: 76.079999999999998, type: 'block'},
 {code: 1002, name: 'Purba Champaran', parent: 10, lat: 26.620000000000001, lng: 84.920000000000002, type: 'district'},
 {code: 1035, name: 'Gaya', parent: 10, lat: 24.699999999999999, lng: 84.939999999999998, type: 'district'},
 {code: 1036, name: 'Nawada', parent: 10, lat: 24.809999999999999, lng: 85.590000000000003, type: 'district'},
 {code: 1023, name: 'Banka', parent: 10, lat: 24.850000000000001, lng: 86.840000000000003, type: 'district'},
 {code: 1034, name: 'Aurangabad', parent: 10, lat: 24.789999999999999, lng: 84.409999999999997, type: 'district'},
 {code: 1033, name: 'Jehanabad', parent: 10, lat: 25.149999999999999, lng: 84.890000000000001, type: 'district'},
 {code: 1025, name: 'Lakhisarai', parent: 10, lat: 25.16, lng: 86.140000000000001, type: 'district'},
 {code: 1032, name: 'Rohtas', parent: 10, lat: 24.98, lng: 84.030000000000001, type: 'district'},
 {code: 1031, name: 'Kaimur (Bhabua)', parent: 10, lat: 24.989999999999998, lng: 83.609999999999999, type: 'district'},
 {code: 1027, name: 'Nalanda', parent: 10, lat: 25.219999999999999, lng: 85.459999999999994, type: 'district'},
 {code: 1022, name: 'Bhagalpur', parent: 10, lat: 25.27, lng: 87.079999999999998, type: 'district'},
 {code: 1021, name: 'Khagaria', parent: 10, lat: 25.510000000000002, lng: 86.599999999999994, type: 'district'},
 {code: 1028, name: 'Patna', parent: 10, lat: 25.449999999999999, lng: 85.219999999999999, type: 'district'},
 {code: 1029, name: 'Bhojpur', parent: 10, lat: 25.469999999999999, lng: 84.540000000000006, type: 'district'},
 {code: 1030, name: 'Buxar', parent: 10, lat: 25.489999999999998, lng: 84.099999999999994, type: 'district'},
 {code: 1020, name: 'Begusarai', parent: 10, lat: 25.489999999999998, lng: 86.129999999999995, type: 'district'},
 {code: 1010, name: 'Katihar', parent: 10, lat: 25.539999999999999, lng: 87.650000000000006, type: 'district'},
 {code: 1018, name: 'Vaishali', parent: 10, lat: 25.760000000000002, lng: 85.370000000000005, type: 'district'},
 {code: 1012, name: 'Saharsa', parent: 10, lat: 25.809999999999999, lng: 86.590000000000003, type: 'district'},
 {code: 1011, name: 'Madhepura', parent: 10, lat: 25.82, lng: 86.900000000000006, type: 'district'},
 {code: 1009, name: 'Purnia', parent: 10, lat: 25.809999999999999, lng: 87.409999999999997, type: 'district'},
 {code: 1017, name: 'Saran', parent: 10, lat: 25.899999999999999, lng: 84.829999999999998, type: 'district'},
 {code: 1016, name: 'Siwan', parent: 10, lat: 26.16, lng: 84.390000000000001, type: 'district'},
 {code: 1014, name: 'Muzaffarpur', parent: 10, lat: 26.149999999999999, lng: 85.329999999999998, type: 'district'},
 {code: 1013, name: 'Darbhanga', parent: 10, lat: 26.149179, lng: 85.890587, type: 'district'},
 {code: 1008, name: 'Kishanganj', parent: 10, lat: 26.289999999999999, lng: 87.939999999999998, type: 'district'},
 {code: 1006, name: 'Supaul', parent: 10, lat: 26.239999999999998, lng: 86.799999999999997, type: 'district'},
 {code: 1015, name: 'Gopalganj', parent: 10, lat: 26.440000000000001, lng: 84.379999999999995, type: 'district'},
 {code: 1003, name: 'Sheohar', parent: 10, lat: 26.48, lng: 85.329999999999998, type: 'district'},
 {code: 1004, name: 'Sitamarhi', parent: 10, lat: 26.59, lng: 85.560000000000002, type: 'district'},
 {code: 1001, name: 'Pashchim Champaran', parent: 10, lat: 27.079999999999998, lng: 84.340000000000003, type: 'district'},
 {code: 1037, name: 'Jamui', parent: 10, lat: 24.780000000000001, lng: 86.299999999999997, type: 'district'},
 {code: 1026, name: 'Sheikhpura', parent: 10, lat: 25.129999999999999, lng: 85.819999999999993, type: 'district'},
 {code: 1024, name: 'Munger', parent: 10, lat: 25.210000000000001, lng: 86.530000000000001, type: 'district'},
 {code: 1019, name: 'Samastipur', parent: 10, lat: 25.77, lng: 85.900000000000006, type: 'district'},
 {code: 1007, name: 'Araria', parent: 10, lat: 26.199999999999999, lng: 87.349999999999994, type: 'district'},
 {code: 1005, name: 'Madhubani', parent: 10, lat: 26.399999999999999, lng: 86.219999999999999, type: 'district'},
 {code: 10190001, name: 'Rusera', parent: 1019, lat: 25.77, lng: 86.140000000000001, type: 'block'},
 {code: 10180001, name: 'Hajipur', parent: 1018, lat: 25.760000000000002, lng: 85.370000000000005, type: 'block'},
 {code: 10120001, name: 'Saharsa', parent: 1012, lat: 25.809999999999999, lng: 86.590000000000003, type: 'block'},
 {code: 10190002, name: 'Samastipur', parent: 1019, lat: 25.829999999999998, lng: 85.739999999999995, type: 'block'},
 {code: 10350001, name: 'Gaya', parent: 1035, lat: 24.699999999999999, lng: 84.939999999999998, type: 'block'},
 {code: 10360001, name: 'Nawada', parent: 1036, lat: 24.809999999999999, lng: 85.590000000000003, type: 'block'},
 {code: 10230001, name: 'Banka', parent: 1023, lat: 24.850000000000001, lng: 86.840000000000003, type: 'block'},
 {code: 10340001, name: 'Aurangabad', parent: 1034, lat: 24.789999999999999, lng: 84.409999999999997, type: 'block'},
 {code: 10370001, name: 'Jamui', parent: 1037, lat: 24.780000000000001, lng: 86.299999999999997, type: 'block'},
 {code: 10260001, name: 'Sheikhpura', parent: 1026, lat: 25.129999999999999, lng: 85.819999999999993, type: 'block'},
 {code: 10330001, name: 'Jehanabad', parent: 1033, lat: 25.149999999999999, lng: 84.890000000000001, type: 'block'},
 {code: 10250001, name: 'Lakhisarai', parent: 1025, lat: 25.16, lng: 86.140000000000001, type: 'block'},
 {code: 10320001, name: 'Sasaram', parent: 1032, lat: 24.98, lng: 84.030000000000001, type: 'block'},
 {code: 10310001, name: 'Bhabhua', parent: 1031, lat: 24.989999999999998, lng: 83.609999999999999, type: 'block'},
 {code: 10220001, name: 'Bhagalpur', parent: 1022, lat: 25.219999999999999, lng: 87.109999999999999, type: 'block'},
 {code: 10270001, name: 'Hilsa', parent: 1027, lat: 25.25, lng: 85.310000000000002, type: 'block'},
 {code: 10270002, name: 'Bihar sharif', parent: 1027, lat: 25.199999999999999, lng: 85.549999999999997, type: 'block'},
 {code: 10240001, name: 'Munger', parent: 1024, lat: 25.210000000000001, lng: 86.530000000000001, type: 'block'},
 {code: 10280001, name: 'Masaurhi', parent: 1028, lat: 25.379999999999999, lng: 85.069999999999993, type: 'block'},
 {code: 10220002, name: 'Naugachhia', parent: 1022, lat: 25.359999999999999, lng: 87.040000000000006, type: 'block'},
 {code: 10280002, name: 'Barh', parent: 1028, lat: 25.41, lng: 85.760000000000005, type: 'block'},
 {code: 10280003, name: 'Patna City', parent: 1028, lat: 25.48, lng: 85.280000000000001, type: 'block'},
 {code: 10280004, name: 'Patna', parent: 1028, lat: 25.559999999999999, lng: 85.109999999999999, type: 'block'},
 {code: 10210001, name: 'Khagaria', parent: 1021, lat: 25.510000000000002, lng: 86.599999999999994, type: 'block'},
 {code: 10280005, name: 'Danapur', parent: 1028, lat: 25.489999999999998, lng: 84.890000000000001, type: 'block'},
 {code: 10290001, name: 'Ara', parent: 1029, lat: 25.469999999999999, lng: 84.540000000000006, type: 'block'},
 {code: 10300001, name: 'Buxar', parent: 1030, lat: 25.489999999999998, lng: 84.099999999999994, type: 'block'},
 {code: 10200001, name: 'Begusarai', parent: 1020, lat: 25.489999999999998, lng: 86.129999999999995, type: 'block'},
 {code: 10110001, name: 'Udakishanganj', parent: 1011, lat: 25.609999999999999, lng: 86.950000000000003, type: 'block'},
 {code: 10190003, name: 'Dalsing Sarai', parent: 1019, lat: 25.690000000000001, lng: 85.760000000000005, type: 'block'},
 {code: 10100001, name: 'Katihar', parent: 1010, lat: 25.539999999999999, lng: 87.640000000000001, type: 'block'},
 {code: 10110002, name: 'Madhepura', parent: 1011, lat: 25.949999999999999, lng: 86.870000000000005, type: 'block'},
 {code: 10090001, name: 'Purnia', parent: 1009, lat: 25.809999999999999, lng: 87.409999999999997, type: 'block'},
 {code: 10170001, name: 'Chhapra', parent: 1017, lat: 25.899999999999999, lng: 84.829999999999998, type: 'block'},
 {code: 10060001, name: 'Supaul', parent: 1006, lat: 26.16, lng: 86.700000000000003, type: 'block'},
 {code: 10140001, name: 'Pashchim Muzaffarpur', parent: 1014, lat: 26.129999999999999, lng: 85.150000000000006, type: 'block'},
 {code: 10160001, name: 'Siwan', parent: 1016, lat: 26.16, lng: 84.390000000000001, type: 'block'},
 {code: 10140002, name: 'Purba Muzaffarpur', parent: 1014, lat: 26.16, lng: 85.519999999999996, type: 'block'},
 {code: 10080001, name: 'Kishanganj', parent: 1008, lat: 26.289999999999999, lng: 87.939999999999998, type: 'block'},
 {code: 10060002, name: 'Birpur', parent: 1006, lat: 26.34, lng: 86.909999999999997, type: 'block'},
 {code: 10070001, name: 'Araria', parent: 1007, lat: 26.199999999999999, lng: 87.349999999999994, type: 'block'},
 {code: 10050001, name: 'Jhanjharpur', parent: 1005, lat: 26.329999999999998, lng: 86.420000000000002, type: 'block'},
 {code: 10150001, name: 'Gopalganj', parent: 1015, lat: 26.440000000000001, lng: 84.379999999999995, type: 'block'},
 {code: 10050002, name: 'Madhubani', parent: 1005, lat: 26.43, lng: 86.170000000000002, type: 'block'},
 {code: 10030001, name: 'Sheohar', parent: 1003, lat: 26.48, lng: 85.329999999999998, type: 'block'},
 {code: 10050003, name: 'Benipatti', parent: 1005, lat: 26.48, lng: 85.930000000000007, type: 'block'},
 {code: 10040001, name: 'Paschim Sitamarhi', parent: 1004, lat: 26.559999999999999, lng: 85.450000000000003, type: 'block'},
 {code: 10040002, name: 'Purba Sitamarhi', parent: 1004, lat: 26.609999999999999, lng: 85.640000000000001, type: 'block'},
 {code: 10020001, name: 'Sikarahana', parent: 1002, lat: 26.59, lng: 85.129999999999995, type: 'block'},
 {code: 10020002, name: 'Motihari', parent: 1002, lat: 26.629999999999999, lng: 84.819999999999993, type: 'block'},
 {code: 10010001, name: 'Bettiah', parent: 1001, lat: 27.079999999999998, lng: 84.340000000000003, type: 'block'},
 {code: 10130001, name: 'Jale', parent: 1013, lat: 26.386997224900842, lng: 85.7380027098672, type: 'block'},
 {code: 10130003, name: 'Keotiranway', parent: 1013, lat: 26.323589500292414, lng: 85.79963206083438, type: 'block'},
 {code: 10130002, name: 'Singhwara', parent: 1013, lat: 26.265741505165224, lng: 85.73809154047852, type: 'block'},
 {code: 10130005, name: 'Manigachhi', parent: 1013, lat: 26.28131069328013, lng: 85.96043466570202, type: 'block'},
 {code: 10130004, name: 'Darbhanga', parent: 1013, lat: 26.21371110885456, lng: 85.80872303137886, type: 'block'},
 {code: 10130009, name: 'Bahadurpur', parent: 1013, lat: 26.184029456384494, lng: 85.90329570326954, type: 'block'},
 {code: 10130008, name: 'Benipur', parent: 1013, lat: 26.135953315542512, lng: 86.00136379917818, type: 'block'},
 {code: 10130014, name: 'Ghanshyampur', parent: 1013, lat: 26.158849111826306, lng: 86.12636504696609, type: 'block'},
 {code: 10130006, name: 'Tardih', parent: 1013, lat: 26.17298339544972, lng: 86.22311093219525, type: 'block'},
 {code: 10130007, name: 'Alinagar', parent: 1013, lat: 26.06756565789112, lng: 86.09052204057787, type: 'block'},
 {code: 10130011, name: 'Hayaghat', parent: 1013, lat: 26.053409551305517, lng: 85.90667845153995, type: 'block'},
 {code: 10130017, name: 'Kusheshwar Asthan', parent: 1013, lat: 25.996778927343343, lng: 86.27598074016329, type: 'block'},
 {code: 10130018, name: 'Kusheshwar Asthan (East)', parent: 1013, lat: 25.97626795471254, lng: 86.34123498643, type: 'block'},
 {code: 10130013, name: 'Biraul', parent: 1013, lat: 25.97955680485015, lng: 86.1079986580477, type: 'block'},
 {code: 10130012, name: 'Baheri', parent: 1013, lat: 25.977890406062187, lng: 85.99236472398172, type: 'block'},
 {code: 10130010, name: 'Hanuman Nagar', parent: 1013, lat: 26.08800606598414, lng: 85.78561735497173, type: 'block'},
 {code: 10130015, name: 'Kiratpur', parent: 1013, lat: 26.09299756637272, lng: 86.25128192487105, type: 'block'},
 {code: 10130016, name: 'Gora Bauram', parent: 1013, lat: 25.944183065290936, lng: 86.18759474329111, type: 'block'},
 {code: 35, type: 'state', name: 'Andaman & Nicobar Islands'},
 {code: 28, type: 'state', name: 'Andhra Pradesh'},
 {code: 12, type: 'state', name: 'Arunachal Pradesh'},
 {code: 18, type: 'state', name: 'Assam'},
 {lat: 25.449999999999999, lng: 85.219999999999999, code: 10, type: 'state', name: 'Bihar'},
 {code: 4, type: 'state', name: 'Chandigarh'},
 {code: 22, type: 'state', name: 'Chhattisgarh'},
 {code: 26, type: 'state', name: 'Dadra & Nagar Haveli'},
 {code: 25, type: 'state', name: 'Daman & Diu'},
 {code: 7, type: 'state', name: 'Delhi'},
 {lat: 15.4253792, lng: 73.9830029, code: 30, type: 'state', name: 'Goa'},
 {code: 24, type: 'state', name: 'Gujarat'},
 {code: 6, type: 'state', name: 'Haryana'},
 {code: 2, type: 'state', name: 'Himachal Pradesh'},
 {code: 1, type: 'state', name: 'Jammu & Kashmir'},
 {code: 20, type: 'state', name: 'Jharkhand'},
 {lat: 15.317277499999999, lng: 75.713888400000002, code: 29, type: 'state', name: 'Karnataka'},
 {code: 32, type: 'state', name: 'Kerala'},
 {code: 31, type: 'state', name: 'Lakshadweep'},
 {code: 23, type: 'state', name: 'Madhya Pradesh'},
 {code: 27, type: 'state', name: 'Maharashtra'},
 {code: 14, type: 'state', name: 'Manipur'},
 {code: 17, type: 'state', name: 'Meghalaya'},
 {code: 15, type: 'state', name: 'Mizoram'},
 {code: 13, type: 'state', name: 'Nagaland'},
 {code: 21, type: 'state', name: 'Orissa'},
 {code: 34, type: 'state', name: 'Pondicherry'},
 {code: 3, type: 'state', name: 'Punjab'},
 {code: 8, type: 'state', name: 'Rajasthan'},
 {code: 11, type: 'state', name: 'Sikkim'},
 {lat: 19, lng: 79, code: 30, type: 'state', name: 'Tamilnadu'},
 {code: 16, type: 'state', name: 'Tripura'},
 {code: 9, type: 'state', name: 'Uttar Pradesh'},
 {code: 5, type: 'state', name: 'Uttaranchal'},
 {code: 19, type: 'state', name: 'West Bengal'},
 {code: 3001, name: 'North Goa', parent: 30, lat: 15.5093316, lng: 73.8889499, type: 'district'},
 {code: 3002, name: 'South Goa', parent: 30, lat: 15.2646548, lng: 73.959494, type: 'district'},
 {code: 30020001, name: 'Sasashti', parent: 3002, type: 'block'},
 {code: 30020002, name: 'Sanguem', parent: 3002, lat: 15.2360654, lng: 74.1258287, type: 'block'},
 {code: 30020003, name: 'Quepem', parent: 3002, lat: 15.216667, lng: 74.066667, type: 'block'},
 {code: 30020004, name: 'Kankon', parent: 3002, lat: 15.0079752, lng: 74.0127524, type: 'block'},
 {code: 30020005, name: 'Marmagao', parent: 3002, lat: 15.40823, lng: 73.788727, type: 'block'},
 {code: 30010001, name: 'Pernem', parent: 3001, lat: 15.7220483, lng: 73.7998149, type: 'block'},
 {code: 30010002, name: 'Bardes', parent: 3001, lat: 15.6444128, lng: 73.8330844, type: 'block'},
 {code: 30010003, name: 'Dicholi', parent: 3001, lat: 15.58857, lng: 73.936623, type: 'block'},
 {code: 30010004, name: 'Satari', parent: 3001, lat: 15.5975864, lng: 73.8888502, type: 'block'},
 {code: 30010005, name: 'Goadicholi', parent: 3001,  type: 'block'},
 {code: 30010006, name: 'Goa', parent: 3001, lat: 15.4253792, lng: 73.9830029, type: 'block'},
 {code: 30010007, name: 'Ponda', parent: 3001, lat: 15.3991304, lng: 74.0123851, type: 'block'}

 ]




function loadStates(){
  states=[]
  for(i=0;i<boundaries.length;i++){
    if(!boundaries[i].parent) states.push(boundaries[i]);
  }
  states.sort(function(s1,s2){
    if(s1.name<s2.name) return -1;
    if(s1.name>s2.name) return 1;
    return 0;
  });
  for(i=0;i<states.length;i++){
    $('state').options[i+1]=new Option(states[i].name,states[i].code);
  }

}

function findChildren(parent){
  var children=new Array();
  var index=0;
  for(i=0;i<boundaries.length;i++){
    if(boundaries[i].parent==parent){
     children[index]=boundaries[i];
     index++;
    }
  }
   children.sort(function(s1,s2){
   if(s1.name<s2.name) return -1;
   if(s1.name>s2.name) return 1;
   return 0;
 });
  
  return children;
}

function findIndicators(scheme,current_boundary,type){
  var children=[];
  for(i=0;i<indicators.length;i++){
	if((indicators[i].name==scheme) && (indicators[i].boundary=='dynamic' || indicators[i].boundary==current_boundary.code) && (indicators[i].type==type) ){
	 children.push(indicators[i]);
	}
  }
  return children;
  
}
function populateBoundary(src,target){
    while(target.options.length >0) target.options[0]=null;
    target.options[0]=new Option('---Select---',-1)
    var children=findChildren(src.options[src.selectedIndex].value);
    for(i=0;i<children.length;i++) target.options[i+1]=new Option(children[i].name,children[i].code);
	context.boundary=find_current_boundary()
	context.old_type=''
	showVisualization();
	fireEvent(target,'change')
	
	//This to load balloons for state.
	if(src.name=='state' && (context.type=='map' ||context.type=='markers')){
		removeAllBalloonMarkers();
		if(src.options[src.selectedIndex].value!=-1 && src.options[src.selectedIndex].value!=0) 
		{
			focusMapAndLoadBallons(src.options[src.selectedIndex].value);
		}
		else
		{
			//removeAllBalloonMarkers();
			focusMap();
		}
	}
	//This to load balloons for state.
	removeAllBalloonMarkersTaluk();
	if(src.name=='district' && (context.type=='map' ||context.type=='markers')){
		
		if(src.options[src.selectedIndex].value!=-1 && src.options[src.selectedIndex].value!=0) 
		{
			focusMapAndLoadBallons(src.options[src.selectedIndex].value);
		}
		else
		{
			//removeAllBalloonMarkers();
			focusMap();
		}
	}
}

function setMarkers(){
  ind=findIndicator(context.scheme,context.boundary,context.indicator,'markers')
  xmlhttpGet(ind.marker_url+"?id="+context.boundary.code+"&"+ind.marker_params,function(markerText){
    try{
    	locs=JSON.parse(markerText).locations
    	addMarkers(locs);
    }catch(e){
    	$('headerright').innerHTML='No markers for '+context.scheme+'-'+context.boundary.name +'-'+context.indicator;
    }
    TabbedPanels2.showPanel(0);
  });
}

function $(id){
  return document.getElementById(id);
}

function find_current_boundary(){
  if(selected('gp')!=-1) return boundary_for(selected('gp'));
  if(selected('block')!=-1) return boundary_for(selected('block'));
  if(selected('district')!=-1) return boundary_for(selected('district'));
  if(selected('state')!=-1) return boundary_for(selected('state'));
  else return boundary_for(0); // if boundry is not selected , by default it should shows coutry level chart
}

function boundary_for(code){
   var current_boundary;
   for(i=0;i<boundaries.length && current_boundary==null;i++){
    if(boundaries[i].code==code){
     current_boundary=boundaries[i]
    }
  }
  
  if(!current_boundary) current_boundary={code:0,lat:20.593684,lng:78.96288,name:'India'}
  return current_boundary
}

function selected(id){
   return $(id).options[$(id).selectedIndex].value;

}
function find_parent(b){
  if(!b.parent) return null;
  for(i=0;i<boundaries.length;i++) if(boundaries[i].code==b.parent) return boundaries[i]
  return null;

}
function find_state_if_needed(b){
	var p=b;
	while(p && p.parent && p.type!='state') {
		p=find_parent(p)
	}
	return p;
}

function focusMap(){
  manager.clearMarkers();
  boundary=find_state_if_needed(context.boundary)
  tilesBase=tilesHome+context.scheme+'/'+boundary.name+'/'
  ind=findIndicator(context.scheme,context.boundary,context.indicator,'map')
  if(ind && ind.type=='markers') {
  	setMarkers();
  }
  var current_boundary=context.boundary
  var level=(current_boundary.code+'').length
  if(level==1) level=4;
  else if(level==2) level=6;
  else if(level==4) level=8;
  else if(level==8) level=9;
  map.setMapType(n_customMap);
  if(context.old_type!='map'){
  	map.setCenter(new GLatLng(current_boundary.lat,current_boundary.lng),level);
  }
  
  var adminBoundary='';
  var boundaryCode = context.boundary.code;
  if(boundaryCode==0)//for nation
  {
		adminBoundary = " - Statewise/"+current_boundary.name;
  }
  else if(boundaryCode.toString().length>=1 && boundaryCode.toString().length<=2)//for states
  {
	    adminBoundary = " - Districtwise/"+current_boundary.name;
  }
  else if(boundaryCode.toString().length>=3 && boundaryCode.toString().length<=4)//for districts
  {
		adminBoundary = " - Talukwise/"+current_boundary.name+"/"+$('state').options[$('state').selectedIndex].text;
  }
  else if(boundaryCode.toString().length>=5 && boundaryCode.toString().length<=8) // for blocks
  {
		//have to add for gram panchayats.
  }
  $('headerright').innerHTML=(ind && ind.title!='' ? (ind.title) : (""))+" " +adminBoundary;
  TabbedPanels2.showPanel(0);
}

function focusMapAndLoadBallons(boundaryCode){
  	
  var current_boundary=find_current_boundary();
  var level=(current_boundary.code+'').length
  
  if(level==1) level=4;
  else if(level==2) level=6;
  else if(level==4) level=8;
  else if(level==8) level=9;
  if(context.old_type!='map'){
  	map.setCenter(new GLatLng(current_boundary.lat,current_boundary.lng),level);
  }
  if(boundaryCode==29) // for karnataka
  {     
	  if(context.scheme=="NREGA"){
		  loadKarnatakaDistBalloonsNREGA();
	  }
	  else if(context.scheme=="IAY"){
			loadKarnatakaDistBalloonsIAY();
	   }
  }
  else if(boundaryCode==10)
  {
	   if(context.scheme=="NREGA"){
			loadBiharDistBalloonsNREGA();
	   }
	   else if(context.scheme=="IAY"){
			loadBiharDistBalloonsIAY();
	   }
  }
  else if(boundaryCode==1013){

		if(context.scheme=="NREGA"){
			loadBiharDarbhangaTalukBalloonsNREGA();
	    }
	    else if(context.scheme=="IAY"){
			
	   } 
   }

  
}
	

function xmlhttpGet(strURL,callback) {
    var xmlHttpReq = false;
    var self = this;
    // Mozilla/Safari
    if (window.XMLHttpRequest) {
        self.xmlHttpReq = new XMLHttpRequest();
    }
    // IE
    else if (window.ActiveXObject) {
        self.xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
    }
    self.xmlHttpReq.open('GET', strURL, true);
    //self.xmlHttpReq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    self.xmlHttpReq.onreadystatechange = function() {
        if (self.xmlHttpReq.readyState == 4) {
            callback(self.xmlHttpReq.responseText);
        }
    }
    self.xmlHttpReq.send(null);
}

function fireEvent(element,event){
    if (document.createEventObject){
        // dispatch for IE
        var evt = document.createEventObject();
        return element.fireEvent('on'+event,evt)
    }
    else{
        // dispatch for firefox + others
        var evt = document.createEvent("HTMLEvents");
        evt.initEvent(event, true, true ); // event type,bubbling,cancelable
        return !element.dispatchEvent(evt);
    }
}
function findIndicator(scheme,boundary,indicator,type){
    var scheme_indicators=findIndicators(scheme,boundary,type);
    for(i=0;i<scheme_indicators.length;i++) 
    	if(scheme_indicators[i].indicator==indicator) {return scheme_indicators[i];}
	return null;
}

function visualize(indicator,scheme,type){
    context.scheme=scheme
    context.indicator=indicator
    context.boundary=find_current_boundary();
	context.old_type=context.type
	context.type=type
	
	if(TabbedPanels2.getCurrentTabIndex()==2 )
	{
		if(indicator=='Works(TakenUp Vs Completed)' || indicator=='MoneySpent' || indicator=='SCST/Minority/Others' || indicator=='Target/Achieved')
			context.type='table';
	}
	else if(TabbedPanels2.getCurrentTabIndex()==1 )
	{
		if(indicator=='Works(TakenUp Vs Completed)' || indicator=='MoneySpent' || indicator=='SCST/Minority/Others' || indicator=='Target/Achieved')
			context.type='chart';
	}

	
    showVisualization();
       
	removeAllBalloonMarkers();

	if(TabbedPanels2.getCurrentTabIndex()==0 )
	{
		if(document.getElementById('state').value!=-1 && document.getElementById('state').value!=0)
		{
			focusMapAndLoadBallons(document.getElementById('state').value);
		}
	}
}

function showVisualization(){
	$('headerright').innerHTML='';
  	GEvent.clearListeners(map,"click");
	if(context.scheme=='' || context.indicator=='') return;
	var ind = findIndicator(context.scheme,context.boundary,context.indicator,context.type);
    if(!ind) {
    	TabbedPanels2.showPanel(tabIndexes[context.type])
    	if(context.type=='chart') $("chart").innerHTML=''
    	if(context.type=='table') $("tables").innerHTML='' 
    	$('headerright').innerHTML='No '+context.scheme+"-"+context.indicator+' report available for '+context.boundary.name;
    	return;
    }
	if(ind.title!=null && ind.title!='')
		$('headerright').innerHTML=ind.title;
    $("chart").innerHTML="";
	if(ind.type=='chart'){
    	$("chart").innerHTML="<img src='"+ind.chart_url+"' width='720'/>"
    	TabbedPanels2.showPanel(1);
    }else if(ind.type=='markers'){
    	focusMap();
    	setMarkers();
    }else if(ind.type=='map'){
    	focusMap();
    }else if(ind.type=='table'){
		$("tables").innerHTML="<iframe src='"+ind.table_url+"' frameborder='0' marginheight='0' marginwidth='0' scroll='auto' height='320' width='720'></iframe>";
	}
}

function openLegendWindow(indicator,scheme,type)
{	
	var ind = findIndicator(scheme,context.boundary,indicator,type);
	if(!ind)
	{
   		$('headerright').innerHTML='No '+context.scheme+"-"+context.indicator+' legend available for '+context.boundary.name;
    	return;
	}
	window.open(ind.legend_url,'_blank','width=230,height=300,scrollbars=no,left=680,top=400,resizable=no,toolbar=no,location=no,directories=no,status=no,menubar=no,copyhistory=no');
	

}

function openWhileTabOnclick()
{
	if(TabbedPanels2.getCurrentTabIndex()==2 || TabbedPanels2.getCurrentTabIndex()==1)//for tab table.
	{
		if(context.scheme=="NREGA" || context.scheme=="IAY" ){
			if(context.boundary.code==0 && context.indicator=='Gradation'){ // when comes from tab maps to other tabs.
				if(context.scheme=="NREGA")				
					context.indicator='MoneySpent';				
				else if(context.scheme=="IAY")
					context.indicator='Target/Achieved';
			}
			
			if(context.indicator=='Works(TakenUp Vs Completed)' || context.indicator=='MoneySpent' || context.indicator=='SCST/Minority/Others' || context.indicator=='Target/Achieved')
			{
				if(TabbedPanels2.getCurrentTabIndex()==2 )//for tab table.
					visualize(context.indicator,context.scheme,'table');
				else if(TabbedPanels2.getCurrentTabIndex()==1 )//for tab graphics.
					visualize(context.indicator,context.scheme,'chart');
			}
		}
	}	
}

function selectPointOnMap(action_name){
	var action=action_map[action_name]
	$('headerright').innerHTML=action.text
	var listener=GEvent.addListener(map, "click", function(overlay, latlng) {
  		PopupCenter(action.target_url+'?lat='+latlng.lat()+"&long="+latlng.lng(),'myPop1',950,600);
	});
}

var context={scheme:'',indicator:'',boundary:'',visualization:'',type:'',old_type:''}

var tabIndexes=[]
tabIndexes['chart']=1
tabIndexes['markers']=0
tabIndexes['map']=0
tabIndexes['table']=02